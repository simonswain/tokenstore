# Tokenstore

Version: 0.0.2

[![Build Status](https://travis-ci.org/simonswain/tokenstore.png)](https://travis-ci.org/simonswain/tokenstore)

## Install

```bash
npm install tokenstore
```

## Usage

```
var Tokenstore = require('tokenstore');
var tokens = Tokenstore.api({
    prefix: 'my_token_prefix',
    redis: {
      host: '127.0.0.1',
      port: 6379
    }
  });
```

## API

All methods take a callback that is called with err and result. The
signatures below use `done` to identify the callback.

* [`reset`](#reset)
* [`quit`](#quit)
* [`add`](#add)
* [`set`](#set)
* [`get`](#get)
* [`del`](#del)
* [`owner`](#owner)
* [`list`](#list)


<a name="reset" />
### reset(done)

<a name="quit" />
### quit(done)


<a name="add" />
### add(owner_id, [token_id, ] attrs, done)

`owner_id` is an arbitrary string. It is intended to be a uuid.

If you don't supply a `token_id`, one will be created for you. By
default, `token_id`s are 24 characters, generated by the `uid2` module
as `uid(24)`.

You can supply a `token_id` to force use of that id. e.g. for
restoring a lost database. The token_id you supply must conform to the
the length requirement.

`attrs` is a plain javascript object. It will be stringified and
stored in Redis.

<a name="get" />
### get(token_id, done)

Passes done the `attrs` object of `token_id`.

<a name="set" />
### get(token_id, done)

Overwrites the existing `attrs` object of `token_id`.

<a name="del" />
### del(token_id, done)

Deletes `token_id`

<a name="owner" />
### owner(token_id, done)

Passes `done` the string literal of that token's owner.

<a name="list" />
### list(owner_id, done)

Passes `done` an array of tokens owned by that user. Each token is
returned as `{id: <token_id>, attrs: <attrs object>}`.

## Release History

* 27/10/2014 0.0.2

## License

Copyright (c) 2014 Simon Swain

Licensed under the MIT license.
